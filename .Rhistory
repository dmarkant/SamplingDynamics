lines(density(freq_df2$lpv), main='log pooled variance', col='blue')
plot(density(rare_df2$abs_mn_diff), main='Abs(mean difference)', col='red', ylim=c(0, .3), xlim=c(-10, 10))
lines(density(freq_df2$abs_mn_diff), main='Abs(mean difference)', col='blue')
par(mfrow=c(3,2))
plot(density(rare_df2$sample_mean), main='Sample mean', col='red', xlim=c(-10, 10))
lines(density(freq_df2$sample_mean), main='Sample mean', col='blue')
plot(density(rare_df2$deviation), main='Deviation from sample mean', col='red', ylim=c(0, .5), xlim=c(-10, 10))
lines(density(freq_df2$deviation), main='Deviation from sample mean', col='blue')
plot(density(rare_df2$abs_dev), main='Abs(deviation)', col='red', ylim=c(0, .4), xlim=c(-10, 10))
lines(density(freq_df2$abs_dev), main='Abs(deviation)', col='blue')
plot(density(rare_df2$sample_var), main='Sample var', col='red', ylim=c(0, .4), xlim=c(-10, 10))
lines(density(freq_df2$sample_var), main='Sample var', col='blue')
plot(density(rare_df2$lpv), main='log pooled variance', col='red', ylim=c(0, .3), xlim=c(-10, 10))
lines(density(freq_df2$lpv), main='log pooled variance', col='blue')
plot(density(rare_df2$abs_mn_diff), main='Abs(mean difference)', col='red', ylim=c(0, .3), xlim=c(-10, 10))
lines(density(freq_df2$abs_mn_diff), main='Abs(mean difference)', col='blue')
sdata = data[data$partid==111,]
par(mfrow=c(3,2))
r = ddply(sdata, c("streak_length"), function(df) mean(df$switch_or_stop))
names(r) = c("streak_length", "prop")
plot(r$streak_length, r$prop, ylim=c(0, 1))
r = ddply(sdata, c("sample_out"), function(df) mean(df$switch_or_stop))
names(r) = c("sample_out", "prop")
m2 = glm(switch_or_stop ~ 1 + sample_out, data=sdata, family=binomial)
plot(sdata$sample_out, fitted(m2), ylim=c(0, 1))
lines(r$sample_out, r$prop, col='blue')
plot(sdata$deviation, sdata$switch_or_stop)
plot(sdata$abs_dev, sdata$switch_or_stop)
m4 = glm(switch_or_stop ~ 1 + abs_dev, data=sdata, family=binomial)
plot(sdata$abs_dev, fitted(m4))
summary(m4)
par(mfrow=c(3,2))
plot(density(rare_df$sample_mean), main='Sample mean', col='red')
plot(density(rare_df$deviation), main='Deviation from sample mean', col='red', ylim=c(0, .5))
plot(density(rare_df$abs_dev), main='Abs(deviation)', col='red', ylim=c(0, .4))
plot(density(rare_df$sample_var), main='Sample var', col='red', ylim=c(0, .4))
plot(density(rare_df$lpv), main='log pooled variance', col='red', ylim=c(0, .3))
plot(density(rare_df$abs_mn_diff), main='Abs(mean difference)', col='red', ylim=c(0, .3))
par(mfrow=c(3,2))
plot(density(rare_df$sample_mean), main='Sample mean', col='red', xlim=c(-10, 10))
plot(density(rare_df$deviation), main='Deviation from sample mean', col='red', ylim=c(0, .5), xlim=c(-10, 10))
plot(density(rare_df$abs_dev), main='Abs(deviation)', col='red', ylim=c(0, .4), xlim=c(-10, 10))
plot(density(rare_df$sample_var), main='Sample var', col='red', ylim=c(0, .4), xlim=c(-10, 10))
plot(density(rare_df$lpv), main='log pooled variance', col='red', ylim=c(0, .3), xlim=c(-10, 10))
plot(density(rare_df$abs_mn_diff), main='Abs(mean difference)', col='red', ylim=c(0, .3), xlim=c(-10, 10))
[[0, 1]]
[0, 1]
(0, 1)
c(0, 1)
lines(c(0,1), c(1,2))
lines(c(0,.1), c(1,.2))
lines(c(0,0), c(0,1))
lines(c(1.96,1.96), c(0,1))
lines(c(1.96,1.96), c(0,1))
par(mfrow=c(3,2))
plot(density(rare_df$sample_mean), main='Sample mean', col='red', xlim=c(-10, 10))
plot(density(rare_df$deviation), main='Deviation from sample mean', col='red', ylim=c(0, .5), xlim=c(-10, 10))
plot(density(rare_df$abs_dev), main='Abs(deviation)', col='red', ylim=c(0, .4), xlim=c(-10, 10))
plot(density(rare_df$sample_var), main='Sample var', col='red', ylim=c(0, .4), xlim=c(-10, 10))
plot(density(rare_df$lpv), main='log pooled variance', col='red', ylim=c(0, .3), xlim=c(-10, 10))
plot(density(rare_df$abs_mn_diff), main='Abs(mean difference)', col='red', ylim=c(0, .3), xlim=c(-10, 10))
par(mfrow=c(3,2))
plot(density(rare_df2$sample_mean), main='Sample mean', col='red', xlim=c(-10, 10))
lines(density(freq_df2$sample_mean), main='Sample mean', col='blue')
plot(density(rare_df2$deviation), main='Deviation from sample mean', col='red', ylim=c(0, .5), xlim=c(-10, 10))
lines(density(freq_df2$deviation), main='Deviation from sample mean', col='blue')
plot(density(rare_df2$abs_dev), main='Abs(deviation)', col='red', ylim=c(0, .4), xlim=c(-10, 10))
lines(density(freq_df2$abs_dev), main='Abs(deviation)', col='blue')
plot(density(rare_df2$sample_var), main='Sample var', col='red', ylim=c(0, .4), xlim=c(-10, 10))
lines(density(freq_df2$sample_var), main='Sample var', col='blue')
plot(density(rare_df2$lpv), main='log pooled variance', col='red', ylim=c(0, .3), xlim=c(-10, 10))
lines(density(freq_df2$lpv), main='log pooled variance', col='blue')
plot(density(rare_df2$abs_mn_diff), main='Abs(mean difference)', col='red', ylim=c(0, .3), xlim=c(-10, 10))
lines(density(freq_df2$abs_mn_diff), main='Abs(mean difference)', col='blue')
rcorr.
rcorr
library(Hmisc)
install.packages("Hmisc")
library(Hmisc)
rcorr
help(rcorr)
rcorr.cens
help(rcorr.cens)
setwd("~/code/SamplingDynamics/")
data = as.data.frame(read.csv("dfe_by_game.csv"))
data$group = factor(data$group)
data$domain = factor(data$domain)
data$switch_grp = factor(data$switch_grp)
head(data)
data$switchfreq
data$switch_freq = as.numeric(as.character(data$switch_freq))
head(data)
data$switchfreq = as.numeric(as.character(data$switchfreq))
data$switchfreq
hist(data$switchfreq)
head(data)
data$domain
head(data)
rcorr.cens(data$switchfreq, session, outx=TRUE)
rcorr.cens(data$switchfreq, data$session, outx=TRUE)
data = as.data.frame(read.csv('reg_data.csv'))
data$domain = factor(data$domain)
data$gamble_lab = factor(data$gamble_lab)
data$switched = factor(data$switched)
data$group = factor(data$group)
data$sample_mean = as.numeric(as.character(data$sample_mean))
data$deviation = as.numeric(as.character(data$deviation))
data$sample_var = as.numeric(as.character(data$sample_var))
data$switch_or_stop = data$switched==1 | data$stopped==1
data$abs_dev = abs(data$deviation)
data$dec = as.numeric(data$switched)-1 + 2*(as.numeric(data$stopped))
data$mn_diff = as.numeric(as.character(data$mn_diff))
data$lpv = log(as.numeric(as.character(data$lpv)))
freq_data = data[data$switch_grp == 'freq',]
rare_data = data[data$switch_grp == 'rare',]
subj_rare = unique(data[data$switch_grp=='rare',]$partid)
subj_freq = unique(data[data$switch_grp=='freq',]$partid)
data$abs_dev
hist(data$abs_dev)
hist(rare_data$abs_dev)
rare_data$switch_or_stop
library(ggplot)
install.packages("ggplot2")
library(ggplot2)
ggplot(rare_data, aes(abs_dev, color=switch_or_stop)) +
geom_density(alpha = .2)
head(rare_data)
ggplot(rare_data, aes(sample_out, color=switch_or_stop)) +
geom_density(alpha = .2)
data = as.data.frame(read.csv("dfe_by_game.csv"))
data$group = factor(data$group)
data$domain = factor(data$domain)
data$switch_grp = factor(data$switch_grp)
data$switchfreq = as.numeric(as.character(data$switchfreq))
head(data)
head(data)
data = as.data.frame(read.csv("dfe_by_game.csv"))
data$group = factor(data$group)
data$domain = factor(data$domain)
data$switch_grp = factor(data$switch_grp)
data$switchfreq = as.numeric(as.character(data$switchfreq))
summary(data)
data$gamble_lab = factor(gamble_lab)
data$gamble_lab = factor(data$gamble_lab)
summary(data)
data$partid = factor(data$partid)
summary(data)
m1 = lmer(samplesize ~ group + domain + session + (1|partid) + (1|gamble_lab), data=data)
library(lme4)
m = lmer(samplesize ~ group + domain + session + (1|partid), data=data)
summary(m)
m1 = lmer(samplesize ~ group + domain + session + (1|partid) + (1|gamble_lab), data=data)
summary(m1)
library(lme4)
library(SASmixed)
p.values.lmer <- function(x) {
summary.model <- summary(x)
data.lmer <- data.frame(model.matrix(x))
names(data.lmer) <- names(fixef(x))
names(data.lmer) <- gsub(pattern=":", x=names(data.lmer), replacement=".", fixed=T)
names(data.lmer) <- ifelse(names(data.lmer)=="(Intercept)", "Intercept", names(data.lmer))
string.call <- strsplit(x=as.character(x@call), split=" + (", fixed=T)
var.dep <- unlist(strsplit(x=unlist(string.call)[2], " ~ ", fixed=T))[1]
vars.fixef <- names(data.lmer)
formula.ranef <- paste("+ (", string.call[[2]][-1], sep="")
formula.ranef <- paste(formula.ranef, collapse=" ")
formula.full <- as.formula(paste(var.dep, "~ -1 +", paste(vars.fixef, collapse=" + "),
formula.ranef))
data.ranef <- data.frame(x@frame[,
which(names(x@frame) %in% names(ranef(x)))])
names(data.ranef) <- names(ranef(x))
data.lmer <- data.frame(x@frame[, 1], data.lmer, data.ranef)
names(data.lmer)[1] <- var.dep
out.full <- lmer(formula.full, data=data.lmer, REML=F)
p.value.LRT <- vector(length=length(vars.fixef))
for(i in 1:length(vars.fixef)) {
formula.reduced <- as.formula(paste(var.dep, "~ -1 +", paste(vars.fixef[-i],
collapse=" + "), formula.ranef))
out.reduced <- lmer(formula.reduced, data=data.lmer, REML=F)
print(paste("Reduced by:", vars.fixef[i]))
print(out.LRT <- data.frame(anova(out.full, out.reduced)))
p.value.LRT[i] <- round(out.LRT[2, 7], 3)
}
summary.model@coefs <- cbind(summary.model@coefs, p.value.LRT)
summary.model@methTitle <- c("\n", summary.model@methTitle,
"\n(p-values from comparing nested models fit by maximum likelihood)")
print(summary.model)
}
p.values.lmer(m1)
summary(m1)
install.packages("languageR")
library(languageR)
helppvals.fnc)
help(pvals.fnc)
pvalues
help(lme4)
pvals.fnc(m1)
install.packages("lmerTest")
library(lmerTest)
lmerTest::
lmerTest::summary
help(lmerTest::summary)
summary
summary(m1)
help(summary)
summary(m1)
library(lmerTest)
lmerTest::summary
help(lmerTest::summary)
lmerTest::summary(m1)
lmerTest::anova(m1)
m1 = lmerTest::lmer(samplesize ~ group + domain + session + (1|partid) + (1|gamble_lab), data=data)
summary(m1)
m = lmerTest::lmer(samplesize ~ group + domain + session + (1|partid), data=data)
summary(m)
data$groupyng
data$group
summary(m)
summary(m1)
head(data)
m1 = lmerTest::lmer(samplesize ~
group +
domain +
session +
switchfreq +
(1|partid) +
(1|gamble_lab), data=data)
summary(m1)
m1 = lmerTest::lmer(samplesize ~
group +
domain +
session +
switchgrp +
(1|partid) +
(1|gamble_lab), data=data)
head(data)
m1 = lmerTest::lmer(samplesize ~
group +
domain +
session +
switch_grp +
(1|partid) +
(1|gamble_lab), data=data)
summary(m1)
m1 = lmerTest::lmer(samplesize ~
group +
domain +
session +
switch_grp +
(1|partid), data=data)
summary(m1)
m2 = lmerTest::lmer(samplesize ~
group +
domain +
session +
switch_grp +
(1|partid) +
(1|gamble_lab), data=data)
summary(m2)
anova(m1, m2)
head(data)
data = as.data.frame(read.csv("dfe_by_game.csv"))
head(data)
summary(data)
data$group = factor(data$group)
data$domain = factor(data$domain)
data$switch_grp = factor(data$switch_grp)
data$switchfreq = as.numeric(as.character(data$switchfreq))
data$gamble_lab = factor(data$gamble_lab)
data$partid = factor(data$partid)
summary(data)
m1 = lmerTest::lmer(samplesize ~
group +
session +
domain +
pairtype +
ev_diff +
switch_grp +
(1|partid), data=data)
summary(m1)
data$group = factor(data$group)
m1 = lmerTest::lmer(samplesize ~
group +
session +
domain +
pairtype +
ev_diff +
switch_grp +
(1|partid), data=data)
summary(m1)
head(data)
summary(data)
data$L_id = factor(data$L_id)
data$H_id = factor(data$H_id)
summary(data)
data$L_id = factor(as.character(data$L_id))
data = as.data.frame(read.csv("dfe_by_game.csv"))
data$L_id
factor(data$L_id)
summary(data)
data$L_id = factor(as.character(data$L_id))
summary(data)
data$L_id = factor(data$L_id)
data$H_id = factor(data$H_id)
data = as.data.frame(read.csv("dfe_by_game.csv"))
data$group = factor(data$group)
data$domain = factor(data$domain)
data$switch_grp = factor(data$switch_grp)
data$switchfreq = as.numeric(as.character(data$switchfreq))
data$gamble_lab = factor(data$gamble_lab)
data$partid = factor(data$partid)
data$L_id = factor(data$L_id)
data$H_id = factor(data$H_id)
m1 = lmerTest::lmer(samplesize ~
group +
session +
domain +
L_id +
H_id +
pairtype +
ev_diff +
switch_grp +
(1|partid), data=data)
summary(m1)
m = lmerTest::lmer(switchcount ~
samplesize +
group +
session +
domain +
pairtype +
ev_diff +
(1|partid), data=data)
summary(m)
m = lmerTest::lmer(switchcount ~
group +
session +
domain +
pairtype +
ev_diff +
(samplesize|partid), data=data)
summary(m)
ranef(m)
ranef(m)$partid
ranef(m)$partid['samplesize',]
ranef(m)$partid['samplesize']
plot(ranef(m)$partid['samplesize'])
summary(m)
m = lmerTest::lmer(switchfreq ~
group +
session +
domain +
pairtype +
ev_diff +
(1|partid), data=data)
summary(m)
hist(data$switchfreq)
m = lmerTest::lmer(switchcount ~
group +
session +
domain +
pairtype +
ev_diff +
(samplesize|partid), data=data)
summary(m)
m = lmerTest::lmer(switchcount ~
group +
session +
domain +
pairtype +
ev_diff +
group:ev_diff +
(samplesize|partid), data=data)
m1 = lmerTest::lmer(samplesize ~
group +
session +
domain +
pairtype +
ev_diff +
group:ev_diff +
switch_grp +
(1|partid), data=data)
summary(m1)
m1 = lmerTest::lmer(samplesize ~
group +
session +
domain +
pairtype +
ev_diff +
switch_grp +
switch_grp:domain +
switch_grp:pairtype +
switch_grp:ev_diff +
(1|partid), data=data)
summary(m1)
m1 = lmerTest::lmer(samplesize ~
group +
session +
domain +
pairtype +
ev_diff +
switch_grp +
(1|partid), data=data)
m = lmerTest::lmer(switchcount ~
group +
session +
domain +
pairtype +
ev_diff +
(samplesize|partid), data=data)
rcorr.cens
data = as.data.frame(read.csv('reg_data.csv'))
data$domain = factor(data$domain)
data$gamble_lab = factor(data$gamble_lab)
data$switched = factor(data$switched)
data$group = factor(data$group)
data$sample_mean = as.numeric(as.character(data$sample_mean))
data$deviation = as.numeric(as.character(data$deviation))
data$sample_var = as.numeric(as.character(data$sample_var))
data$switch_or_stop = data$switched==1 | data$stopped==1
data$abs_dev = abs(data$deviation)
data$dec = as.numeric(data$switched)-1 + 2*(as.numeric(data$stopped))
data$mn_diff = as.numeric(as.character(data$mn_diff))
data$lpv = log(as.numeric(as.character(data$lpv)))
freq_data = data[data$switch_grp == 'freq',]
rare_data = data[data$switch_grp == 'rare',]
rcorr.cens(rare_data$abs_dev, data$switch_or_stop)
rcorr.cens(rare_data$abs_dev, rare_data$switch_or_stop)
setwd("~/code/SamplingDynamics/")
library(lme4)
library(lmerTest)
data = as.data.frame(read.csv("dfe_by_game.csv"))
data$group = factor(data$group)
data$domain = factor(data$domain)
data$switch_grp = factor(data$switch_grp)
data$switchfreq = as.numeric(as.character(data$switchfreq))
data$gamble_lab = factor(data$gamble_lab)
data$partid = factor(data$partid)
data$L_id = factor(data$L_id)
data$H_id = factor(data$H_id)
setwd("~/code/SamplingDynamics/")
data = as.data.frame(read.csv("dfe_by_game.csv"))
data$group = factor(data$group)
data$domain = factor(data$domain)
data$switch_grp = factor(data$switch_grp)
data$switchfreq = as.numeric(as.character(data$switchfreq))
data$gamble_lab = factor(data$gamble_lab)
data$partid = factor(data$partid)
data$L_id = factor(data$L_id)
data$H_id = factor(data$H_id)
data
head(data)
data = as.data.frame(read.csv("dfe_by_game.csv"))
data$group = factor(data$group)
data$domain = factor(data$domain)
data$switch_grp = factor(data$switch_grp)
data = as.data.frame(read.csv("dfe_by_game.csv"))
head(data)
data$group = factor(data$group)
data$domain = factor(data$domain)
data$switch_grp = factor(data$switch_grp)
data$switchfreq = as.numeric(as.character(data$switchfreq))
data$gamble_lab = factor(data$gamble_lab)
data$partid = factor(data$partid)
data$L_id = factor(data$L_id)
data$H_id = factor(data$H_id)
m1 = lmerTest::lmer(samplesize ~
group +
session +
domain +
pairtype +
ev_diff +
switch_grp +
(1|partid), data=data)
library(lmerTest)
install.packages("lmerTest")
R.version()
version()
setwd("~/code/SamplingDynamics/")
library(lme4)
library(lmerTest)
data = as.data.frame(read.csv("dfe_by_game.csv"))
data$group = factor(data$group)
data$domain = factor(data$domain)
data$switch_grp = factor(data$switch_grp)
data$switchfreq = as.numeric(as.character(data$switchfreq))
data$gamble_lab = factor(data$gamble_lab)
data$partid = factor(data$partid)
data$L_id = factor(data$L_id)
data$H_id = factor(data$H_id)
help(cor)
data = as.data.frame(read.csv('reg_data.csv'))
data$domain = factor(data$domain)
data$gamble_lab = factor(data$gamble_lab)
data$switched = factor(data$switched)
data$group = factor(data$group)
data$sample_mean = as.numeric(as.character(data$sample_mean))
data$deviation = as.numeric(as.character(data$deviation))
data$sample_var = as.numeric(as.character(data$sample_var))
data$switch_or_stop = data$switched==1 | data$stopped==1
data$abs_dev = abs(data$deviation)
data$dec = as.numeric(data$switched)-1 + 2*(as.numeric(data$stopped))
data$mn_diff = as.numeric(as.character(data$mn_diff))
data$lpv = log(as.numeric(as.character(data$lpv)))
head(data)
cor(data$switch_or_stop, data$mn_diff)
cor(data$switch_or_stop, data$mn_diff, method="kendall")
setwd("~/code/SamplingDynamics/")
library(lme4)
library(languageR)
library(lmerTest)
install.packages(lmerTest)
install.packages("lmerTest")
